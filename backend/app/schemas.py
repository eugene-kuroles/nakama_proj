"""
üìù Pydantic —Å—Ö–µ–º—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö API.

–°—Ö–µ–º—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç:
- –ö–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ–∂–∏–¥–∞–µ—Ç API –Ω–∞ –≤—Ö–æ–¥ (–∑–∞–ø—Ä–æ—Å—ã)
- –ö–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç API (–æ—Ç–≤–µ—Ç—ã)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é (–ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏)

Pydantic –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ï—Å–ª–∏ –ø—Ä–∏–¥—ë—Ç —Å—Ç—Ä–æ–∫–∞ –≤–º–µ—Å—Ç–æ —á–∏—Å–ª–∞ ‚Äî –≤–µ—Ä–Ω—ë—Ç—Å—è –æ—à–∏–±–∫–∞
- –ï—Å–ª–∏ –Ω–µ –±—É–¥–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—è ‚Äî –≤–µ—Ä–Ω—ë—Ç—Å—è –æ—à–∏–±–∫–∞
"""

from datetime import datetime
from typing import Optional
from pydantic import BaseModel, Field


# ==============================================================================
# –°—Ö–µ–º—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ (–∑–∞–ø—Ä–æ—Å –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞)
# ==============================================================================

class ScoreCreate(BaseModel):
    """
    –°—Ö–µ–º–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.
    
    –≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã.
    
    Attributes:
        player_name: –ò–º—è –∏–≥—Ä–æ–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "Player")
        score: –ù–∞–±—Ä–∞–Ω–Ω—ã–µ –æ—á–∫–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –º–∏–Ω–∏–º—É–º 0)
    
    Example:
        {
            "player_name": "–ò–≥—Ä–æ–∫1",
            "score": 150
        }
    """
    player_name: Optional[str] = Field(
        default="Player",
        max_length=100,
        description="–ò–º—è –∏–≥—Ä–æ–∫–∞ (–º–∞–∫—Å–∏–º—É–º 100 —Å–∏–º–≤–æ–ª–æ–≤)"
    )
    score: int = Field(
        ...,  # ... –æ–∑–Ω–∞—á–∞–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ
        ge=0,  # ge = greater or equal (–±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ 0)
        description="–ù–∞–±—Ä–∞–Ω–Ω—ã–µ –æ—á–∫–∏ (–º–∏–Ω–∏–º—É–º 0)"
    )


# ==============================================================================
# –°—Ö–µ–º—ã –¥–ª—è –æ—Ç–≤–µ—Ç–∞ (—á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä)
# ==============================================================================

class ScoreResponse(BaseModel):
    """
    –°—Ö–µ–º–∞ –æ—Ç–≤–µ—Ç–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –∏–≥—Ä—ã.
    
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–ª–∏ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Å–ø–∏—Å–∫–∞.
    
    Attributes:
        id: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –∑–∞–ø–∏—Å–∏
        player_name: –ò–º—è –∏–≥—Ä–æ–∫–∞
        score: –ù–∞–±—Ä–∞–Ω–Ω—ã–µ –æ—á–∫–∏
        played_at: –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –∏–≥—Ä—ã
        rank: –ú–µ—Å—Ç–æ –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    
    Example:
        {
            "id": 1,
            "player_name": "–ò–≥—Ä–æ–∫1",
            "score": 150,
            "played_at": "2025-01-15T12:30:00",
            "rank": 3
        }
    """
    id: int
    player_name: str
    score: int
    played_at: datetime
    rank: Optional[int] = None  # –ú–µ—Å—Ç–æ –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ (–≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è)
    
    # –≠—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å—Ö–µ–º—É –∏–∑ ORM-–æ–±—ä–µ–∫—Ç–∞ (SQLAlchemy –º–æ–¥–µ–ª–∏)
    model_config = {"from_attributes": True}


class LeaderboardResponse(BaseModel):
    """
    –°—Ö–µ–º–∞ –æ—Ç–≤–µ—Ç–∞ —Å —Ç–∞–±–ª–∏—Ü–µ–π –ª–∏–¥–µ—Ä–æ–≤.
    
    Attributes:
        scores: –°–ø–∏—Å–æ–∫ –ª—É—á—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        total_games: –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—ã–≥—Ä–∞–Ω–Ω—ã—Ö –∏–≥—Ä
    
    Example:
        {
            "scores": [...],
            "total_games": 42
        }
    """
    scores: list[ScoreResponse]
    total_games: int


class BestScoreResponse(BaseModel):
    """
    –°—Ö–µ–º–∞ –æ—Ç–≤–µ—Ç–∞ —Å –ª—É—á—à–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º.
    
    Attributes:
        best_score: –õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–∏–ª–∏ null –µ—Å–ª–∏ –∏–≥—Ä –µ—â—ë –Ω–µ –±—ã–ª–æ)
        total_games: –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä
    
    Example:
        {
            "best_score": 350,
            "total_games": 15
        }
    """
    best_score: Optional[int] = None
    total_games: int


class MessageResponse(BaseModel):
    """–ü—Ä–æ—Å—Ç–æ–π –æ—Ç–≤–µ—Ç —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º."""
    message: str
    success: bool = True
